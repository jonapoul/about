package com.jonapoul.about

import androidx.annotation.StringRes

/**
 * Defines a group of [AboutItem]s with a string to be displayed above. These will be placed into a
 * MaterialCardView inside either an [AboutDialogBuilder] or an [AboutFragment].
 * @param items The list of entries to be displayed under this group.
 * @param title The string resource ID of the section title. If null, no title will be displayed.
 */
data class AboutSection(
    val items: List<AboutItem>,
    @StringRes val title: Int? = null,
) {
    /**
     * Companion object
     */
    companion object {
        /**
         * Constructs an [AboutSection] containing three [AboutItem]s to describe the app's
         * build state.
         * @param versionName Should be BuildConfig.VERSION_NAME
         * @param versionCode Should be BuildConfig.VERSION_CODE
         * @param buildType Should be BuildConfig.BUILD_TYPE
         * @param buildTimeMs Should be BuildConfig.BUILD_TIME_MS (generated by a custom buildConfigField)
         */
        fun fromBuildInfo(
            versionName: String,
            versionCode: Int,
            buildType: String,
            buildTimeMs: Long
        ): AboutSection = AboutSection(
            title = R.string.build_info,
            items = listOf(
                AboutItem.fromVersion(versionName, versionCode),
                AboutItem.fromBuildType(buildType),
                AboutItem.fromBuildTimeMs(buildTimeMs)
            )
        )
    }
}
